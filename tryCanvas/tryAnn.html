<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script type="text/javascript" src="js/jquery-3.2.1.min.js" ></script>
		<script type="text/javascript" src="js/jCanvaScript.1.5.18.js" ></script>
		<script type="text/javascript" src="js/dicomViewer.js" ></script>
		<style>
			canvas{
				background-color: #000000;
			}
			
			canvas.selected{
				background-color: #000000;
			    border: red;
    			border-style: solid;
   	 			border-width: thin;
			}
			.toolbarGroup input{
				width: 60px;
			}
		</style>
		<script>
			window.onload = function(){
				var serializedString = undefined;
				var tag = new dicomTag(1001, 2101, 'Vij Hock');
				var tagList = [];
				tagList.push(tag);
				
				var v1 = new dicomViewer();
				v1.initialize('c1', 'img/img1.jpg', function(){
					v1.setDicomTags(tagList);
					
					v1.addOverlay(1001,2101,overlayPos.topLeft1, 'topLeft');
					v1.addOverlay(1001,2101,overlayPos.topLeft2, 'topLeft2');
					v1.addOverlay(1001,2101,overlayPos.topLeft3, 'topLeft3');
					v1.addOverlay(1001,2101,overlayPos.topRight1, 'topRight1');
					v1.addOverlay(1001,2101,overlayPos.topRight2, 'topRight2');
					v1.addOverlay(1001,2101,overlayPos.topRight3, 'topRight3');
					v1.addOverlay(1001,2101,overlayPos.bottomLeft1, 'bottomLeft1');
					v1.addOverlay(1001,2101,overlayPos.bottomLeft2, 'bottomLeft2');
					v1.addOverlay(1001,2101,overlayPos.bottomLeft3, 'bottomLeft3');
					v1.addOverlay(1001,2101,overlayPos.bottomRight1, 'bottomRight1');
					v1.addOverlay(1001,2101,overlayPos.bottomRight2, 'bottomRight2');
					v1.addOverlay(1001,2101,overlayPos.bottomRight3, 'bottomRight3');
				});
				
				var v2 = new dicomViewer();
				v2.initialize('c2', 'img/img2.jpg', function(){
					v2.addOverlay(1001,2101,overlayPos.topLeft1, 'topLeft');
					v2.addOverlay(1001,2101,overlayPos.topLeft2, 'topLeft2');
					v2.addOverlay(1001,2101,overlayPos.topLeft3, 'topLeft3');
					v2.addOverlay(1001,2101,overlayPos.topRight1, 'topRight1');
					v2.addOverlay(1001,2101,overlayPos.topRight2, 'topRight2');
					v2.addOverlay(1001,2101,overlayPos.topRight3, 'topRight3');
				});
				
				var curViewer = v1;
				$('#c1').on('click', function(){
					$('#c1').addClass('selected');
					$('#c2').removeClass('selected');
					
					curViewer = v1;
				});
				
				$('#c2').on('click', function(){
					$('#c2').addClass('selected');
					$('#c1').removeClass('selected');
					
					curViewer = v2;
				})
			
				$('#btnAddLine').on('click', function(){
					var aLine = curViewer.createLine();
				});
				
				$('#btnAddRect').on('click', function(){
					var aRect = curViewer.createRect();
				});
				
				$('#btnSelect').on('click', function(){
					curViewer.setContext(viewContext.select);
				});
				
				$('#btnPan').on('click', function(){
					curViewer.setContext(viewContext.pan);
				});
				
				$('#btnRotate').on('click', function(){
					curViewer.rotate(30);
				});
				
				$('#btnReset').on('click', function(){
					curViewer.reset();
				});
				
				$('#btnDelete').on('click', function(){
					var curObj = curViewer.curSelectObj;
					if(curObj){
						curViewer.deleteObject(curObj);
					}
				});
				
				$('#btnSave').on('click', function(){
					serializedString = curViewer.serialize();
					alert(serializedString);
				});
				
				$('#btnLoad').on('click', function(){
					if(serializedString){
						curViewer.deSerialize(serializedString);
					}
				});
								
				$('#btnBestFit').on('click', function(){
					curViewer.bestFit();
				});
				
				var cur1 = true;
				$('#btnLoadImg').on('click', function(){
					if(cur1){
						v1.reloadImage('img/img2.jpg');
						cur1=false;
					}else{
						v1.reloadImage('img/img1.jpg');
						cur1 = true;
					}
					
				});
			}
		</script>
	</head>
	<body>
		<div>
			<table class='toolbarGroup'>
				<tr>
					<td><input id='btnSelect' type="button" value='Select'></td>
					<td><input id='btnPan' type="button" value='Pan'></td>
					<td><input id='btnRotate' type="button" value='Rotate'></td>
					<td><input id='btnReset' type="button" value='True Size' style="width:75px"></td>
					<td><input id='btnBestFit' type="button" value='Best Fit'></td>
					<td><input id='btnAddRect' type="button" value='Rect'></td>
					<td><input id='btnAddLine' type="button" value='Line'></td>
					<td><input id='btnDelete' type="button" value='Delete'></td>
					<td><input id='btnSave' type="button" value='Save'></td>
					<td><input id='btnLoad' type="button" value='Load'></td>
					<td><input id='btnLoadImg' type="button" value='LoadImg'></td>
				</tr>
			</table>
		</div>
		<div>
			<canvas id='c1' width="800" height="500" class='selected'></canvas>
			<canvas id='c2' width="800" height="500"></canvas>
		</div>
	</body>
</html>
