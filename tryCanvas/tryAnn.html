<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<script type="text/javascript" src="js/jquery-3.2.1.min.js" ></script>
		<script type="text/javascript" src="js/jCanvaScript.1.5.18.js" ></script>
		<script type="text/javascript" src="js/dicomViewer.js" ></script>
		<style>
			canvas{
				background-color: #F0F8FF;
			}
			
			canvas.selected{
				background-color: #F0F8FF;
			    border: red;
    			border-style: solid;
   	 			border-width: thin;
			}
			.toolbarGroup input{
				width: 60px;
			}
		</style>
		<script>
			window.onload = function(){
				
				var strJSON = {version: 1,annObjecs: [{type: 'line',ptStart: {x:12,y:34},ptEnd: {x:33,y:22}},{type: 'rect',ptStart: {x:11,y:22},width: 123,height: 222}],overlay: []};
				
				
				var v1 = new dicomViewer();
				v1.initialize('c1', 'img/img1.jpg', function(){
					
				});
				
				var v2 = new dicomViewer();
				v2.initialize('c2', 'img/img2.jpg', function(){
					
				});
				
				var curViewer = v1;
				$('#c1').on('click', function(){
					$('#c1').addClass('selected');
					$('#c2').removeClass('selected');
					
					curViewer = v1;
				});
				
				$('#c2').on('click', function(){
					$('#c2').addClass('selected');
					$('#c1').removeClass('selected');
					
					curViewer = v2;
				})
			
				$('#btnAddLine').on('click', function(){
					var aLine = curViewer.createLine();
				});
				
				$('#btnAddRect').on('click', function(){
					var aRect = curViewer.createRect();
				});
				
				$('#btnSelect').on('click', function(){
					curViewer.setContext(viewContext.select);
				});
				
				$('#btnPan').on('click', function(){
					curViewer.setContext(viewContext.pan);
				});
				
				$('#btnRotate').on('click', function(){
					curViewer.rotate(30);
				});
				
				$('#btnReset').on('click', function(){
					curViewer.reset();
				});
				
				$('#btnDelete').on('click', function(){
					var curObj = curViewer.curSelectObj;
					if(curObj){
						curViewer.deleteObject(curObj);
					}
				});
				
				$('#btnSave').on('click', function(){
					var str = curViewer.serialize();
					alert(str);
				});
			}
		</script>
	</head>
	<body>
		<div>
			<table class='toolbarGroup'>
				<tr>
					<td><input id='btnSelect' type="button" value='Select'></td>
					<td><input id='btnPan' type="button" value='Pan'></td>
					<td><input id='btnRotate' type="button" value='Rotate'></td>
					<td><input id='btnAddRect' type="button" value='Rect'></td>
					<td><input id='btnAddLine' type="button" value='Line'></td>
					<td><input id='btnReset' type="button" value='Reset'></td>
					<td><input id='btnDelete' type="button" value='Delete'></td>
					<td><input id='btnSave' type="button" value='Save'></td>
				</tr>
			</table>
		</div>
		<div>
			<canvas id='c1' width="800" height="500" class='selected'></canvas>
			<canvas id='c2' width="800" height="500"></canvas>
		</div>
	</body>
</html>
